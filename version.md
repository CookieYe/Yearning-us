# 版本

## 2020-03-18 Yearning v2.2.1

+ 用户组权限支持搜索功能
+ 支持企业微信 
+ 修改删除工单逻辑，工单及审核记录只允许admin超级管理员用户在设置页面根据日期时间进行删除

## 2020-03-8 Yearning v2.2.0

+ 允许alter合并语句执行
+ 支持create table like 语法
+ 支持create table as  语法
+ 新增-f参数，找回超级管理员admin用户的密码
+ 新增公告页面(markdown格式) #199 
+ 修复多条审核时错误信息重叠展示的问题
+ 修复创建用户时没有创建对应权限的问题
+ 修复查询无法显示Bit类型的字段数据问题 #233 
+ 查询语法错误导致Yearning崩溃的问题 #247 
+ 更改初始化表结构逻辑
+ 优化前端代码
+ 移除权限审核相关废弃代码
+ 优化查询结果为空时的视觉反馈 #236 


## 2020-01-10 Yearning v2.1.9
+ 修复撤销钉钉消息推送 信息不全的问题
+ 修复查询审计详情页显示信息数量异常的问题 #222 
+ 修复utf8mb4表情执行及回滚乱码的问题(特别注意: 如需审核utf8mb4表情语句时,yeanring库必须为utf8mb4字符集。)
+ 新增枚举类型 更新及插入的约束检查
+ 修复json字段无法回滚的问题 #223 
+ docker_compose.yml更新 #224 


## 2020-01-03 Yearning v2.1.8
+ 新增允许 set bit enum 数据类型审核选项 #219  #207 
+ 新增允许创建视图审核选项
+ 优化autotask展示页,编辑后不再跳转第一页
+ 新增允许创建分区表审核选项 #215  #200 
+ juno相关优化
+ 修复无开启查询审核时消息推送异常发送的问题
+ 新增查询超时设置按钮 #214 

## 2019-12-18 Yearning v2.1.7

+ 1.修复驳回理由无法查看的问题
+ 2.修复小分辨率下导航栏无法展示全部信息的问题
+ 3.修复使用offset查询时limit最大上限异常报错的问题
+ 4.添加数据源名称规则允许. _符号
+ 5.新增权限组功能。
+ 6.新增工单撤销消息推送
+ 7.修复设置页面更改设置后会清空审核规则的问题
+ 8.修复查询审核指派工单展示错误的问题
+ 9.新增删除空查询工单按钮，便于查询审计
+ 10.新增docker-compose文件
+ 11.autotask 添加新任务时新增搜索功能。
+ 12.其他优化

## 2019-11-07 Yearning v2.1.6.1

1.修复表内有text,json等[]byte类型字段时最小化生成回滚语句panic的问题

2.更新了基础依赖包版本,修改了binlog连接信息日志级别不准确的问题

3.修改了一些样式


## 2019-11-07 Yearning v2.1.6

1.新增检查隐式类型转换

2.修复了审核引擎的一些问题

3.新增开启回滚语句最小化生成功能(update)

4.修复autotask异常数据库连接断开的问题

5.支持ldaps



## 2019-10-28 Yearning v2.1.5

1.dml/ddl 新增表名自动补全功能

2.autoTask新增激活按钮，只有处于激活状态的task才能使用。默认创建好的task为未激活。

3.autoTask页面支持名称搜索

4.查询界面点击库名也可获取库名信息,不再必须展开库才能获取

5.新增-c 配置文件路径参数，可自由指定配置文件路径。 (我去打个rpm包试试)

6.修复全局查询导出开关无效的问题



## 2019-10-15 Yearning v2.1.4

1.添加数据源增加名称规范 

2.ldap 搜索规则更改为文本填入 不再提供选择框。增加扩展性(破坏性变更) 

3.查询时间过期判断优化

4.修复ldap用户创建后无法匹配模糊搜索的问题

5.修复检测SQL语句时可能存在的连接不释放问题

6.新增AutoTask功能，可对dml自动检测并执行

7.默认选择备份

8.修复主页工单趋势图显示不正确的问题

9.修复单条DDL修改多个字段无法回滚的问题


## 2019-9-07 Yearning v2.1.2

- 纠正了文案上的错别字
- 修复了测试数据库连接不释放连接的问题
- 修复数据库管理页面数据源密码未脱敏的问题

## 2019-9-07 Yearning v2.1.1

- 数据源列表增加返回按钮,解决环境内无数据源时用户无法撤销查询工单的问题
- 修复查询连接名如果还有&符号报错的问题
- 解决偶尔invalid connection的问题
- 新增4个mysql关键字
- ddl/dml最大影响行数分离
- 查询隐藏数据列可同时隐藏导航栏
- 审核工单弹出框表格更改sql展示

## 2019-9-02 Yearning v2.1.0

 - 修复token过期后ddl/dml页面点击检测按钮后无响应的问题
 - 修复rename语句新表名报表名不存在的问题
 - 查询审计详情页面新增每条查询SQL的执行时间
 - 查询审计详情页面增加连接名,库名信息
 - 查询页面重构，支持多数据源查询
 - 查询新增snippet功能(实验性功能)
 - 添加数据源处新增读写选项，满足读写同源的需求
 - token过期后不直接跳转登录界面，新增过期登录提示框，重新输入密码后可继续保持登录状态
 - 密码强度不再要求必须添加特殊符号

## 2019-8-27 Yearning v2.0.9

- 排除数据库的功能同时对dml ddl有效
- 修复查询时如无结果或查询错误时 结果展示处仍然展示上次查询结果的问题
- 查询审计工单增加查询耗费时间展示
- 增加延时工单中止按钮确认对话框


## 2019-8-21 Yearning v2.0.8

+ 新增查询自定义调整分页显示数量
+ fix小问题
+ 新增查询左侧数据列隐藏功能
+ 修复查询分页 v2.0.6引起的bug
+ 我的工单增加工单详细信息
+ 用户注册新增强密码认证
+ 修改了查询语法解析逻辑,关闭脱敏字段可支持复杂查询
+ 尝试优化第一次初始化时有概率不创建用户的问题

## 2019-8-15 Yearning v2.0.5

+ 修复定时工单重新提交时新生成的工单定时时间过期的问题
+ 删除-x参数,变更为启动时自动检测表结构变更
+ 修复ddl语句定时任务中止不生效的问题
+ 更改定时任务调度逻辑,提高可靠性
+ 新增主键列是否必须为int/bigint开关
+ 修复定时工单中止后重新提交工单不执行的问题
+ 审核页面新增定时执行时间展示

## 2019-8-07 Yearning v2.0.4

+ 修复数据源名为中文名时无法删除的问题
+ 修复环境名称为中文时获取库名报错的问题
+ 多级审核人下执行人也可驳回工单
+ Yearning数据库配置支持环境变量定义(容器化)
+ 修复login页面2k分辨率及以上时下方留白的问题
+ fix小问题

## 2019-8-10 Yearning v2.0.3

+ 审核工单表格 SQL展示更改为toolip
+ 新增字段类型转换开关

## 2019-8-07 Yearning v2.0.2

+ Gbk字符集支持
+ 修复执行人消息没有推送的问题

## 2019-8-03 Yearning v2.0.1

+ 调整了对于时间字段的审核逻辑
+ 语句备份前自动调整binlog格式
+ 新增强制主键为自增列开关

## 2019-8-01 Yearning GA

+ 新增定时任务中止功能
+ 新增审核查询一键关闭功能
+ 新增查询限时功能(开关)
+ 打印pt-osc执行信息
+ 修复查询审核页面分页问题

## 2019-7-31 Yearning RC v0.4.0

+ 修复查询无法使用union语句的问题
+ 完善查询错误信息
+ 新增alter语句合并功能

## 2019-7-30 Yearning RC v0.3.0

+ dml语句执行后显示的影响行数更改为准确信息
+ 修复复杂查询下报错的问题
+ 修改了一些文案
+ 新增SQL美化功能
+ 修复快速提交错误异常显示

## 2019-7-29 Yearning RC v0.2.0

+ 钉钉消息推送忽略x509证书校验
+ 改进了某些情况下mysql8.0崩溃的问题
+ 新增pt-osc bug 警告


## 2019-7-26 Yearning RC v0.1.1

+ 修复了设置页面添加排查数据库/添加脱敏字段/添加环境 可重复提交相同值的问题
+ 更改了使用说明链接指向Yearning文档
+ 审核规则优化
+ 页面样式优化

## 2019-7-25 Yearning RC v0.1.0

+ 新增Pt osc功能
+ 修复DDL 多条执行详细信息显示错误问题
+ 修复设置页面保存信息后清空审核规则的问题
+ 优化了初始化及更新方式